function ajaxCall(){this.send=function(e,b,g,f,c){c=c||"json";var d=function(h){f(h)};var a=function(h){console.log(h)};jQuery.ajax({url:b,type:g,data:e,success:d,error:a,dataType:c,timeout:60000})}}function locationInfo(){var a="//geodata.solutions/api/api.php";var e="demo";var d="name";var c="";if(jQuery("#gds_appid").length>0){c+="&appid="+jQuery("#gds_appid").val()}if(jQuery("#gds_hash").length>0){c+="&hash="+jQuery("#gds_hash").val()}var b=new ajaxCall();this.confCity=function(i){var f=a+"?type=confCity&countryId="+jQuery("#countryId option:selected").attr("countryid")+"&stateId="+jQuery("#stateId option:selected").attr("stateid")+"&cityId="+i;var h="post";var g={};b.send(g,f,h,function(j){if(j){}else{}})};this.getCities=function(l){jQuery(".cities option:gt(0)").remove();var j=jQuery("#cityId").attr("class");var i=j.split(" ");i.shift();var h="";if(i.length>0){acC=i.join();h="&addClasses="+encodeURIComponent(acC)}var f=a+"?type=getCities&countryId="+jQuery("#countryId option:selected").attr("countryid")+"&stateId="+l+c+h;var k="post";var g={};jQuery(".cities").find("option:eq(0)").html("Please wait..");b.send(g,f,k,function(p){jQuery(".cities").find("option:eq(0)").html("Select city here");if(p.tp==1){if(p.hits>1000){console.log("Daily geodata.solutions request limit exceeded count:"+p.hits+" of 1000")}else{console.log("Daily geodata.solutions request count:"+p.hits+" of 1000")}var o=Object.keys(p.result).length;if(o>0){jQuery.each(p.result,function(q,s){var r=jQuery("<option />");r.attr("value",s).text(s);jQuery(".cities").append(r)})}else{var m=jQuery("#stateId option:selected").val();var n=jQuery("<option />");n.attr("value",m).text(m);n.attr("selected","selected");jQuery(".cities").append(n)}jQuery(".cities").prop("disabled",false)}else{alert(p.msg)}})};this.getStates=function(l){jQuery(".states option:gt(0)").remove();jQuery(".cities option:gt(0)").remove();var j=jQuery("#stateId").attr("class");var i=j.split(" ");i.shift();var h="";if(i.length>0){acC=i.join();h="&addClasses="+encodeURIComponent(acC)}var f=a+"?type=getStates&countryId="+l+c+h;var k="post";var g={};jQuery(".states").find("option:eq(0)").html("Please wait..");b.send(g,f,k,function(m){jQuery(".states").find("option:eq(0)").html("Select state here");if(m.tp==1){if(m.hits>1000){console.log("Daily geodata.solutions request limit exceeded:"+m.hits+" of 1000")}else{console.log("Daily geodata.solutions request count:"+m.hits+" of 1000")}jQuery.each(m.result,function(n,p){var o=jQuery("<option />");o.attr("value",p).text(p);o.attr("stateid",n);jQuery(".states").append(o)});jQuery(".states").prop("disabled",false)}else{alert(m.msg)}})};this.getCountries=function(){var h=jQuery("#countryId").attr("class");var l=h.split(" ");l.shift();var k="";if(l.length>0){acC=l.join();k="&addClasses="+encodeURIComponent(acC)}var g=false;var j="N";jQuery.each(l,function(n,p){if(p.match("^presel-")){g=p.substring(7)}if(p.match("^presel-byi")){var o="Y"}});var f=a+"?type=getCountries"+c+k;var m="post";var i={};jQuery(".countries").find("option:eq(0)").html("Please wait..");b.send(i,f,m,function(o){jQuery(".countries").find("option:eq(0)").html("Select country here");if(o.tp==1){if(o.hits>1000){console.log("Daily geodata.solutions request limit exceeded:"+o.hits+" of 1000")}else{console.log("Daily geodata.solutions request count:"+o.hits+" of 1000")}if(g=="byip"){g=o.presel;console.log("2 presel is set as "+g)}if(jQuery.inArray("group-continents",l)>-1){var n=jQuery(".countries");console.log(o.result);jQuery.each(o.result,function(r,p){var q=jQuery("<optgroup>",{label:r});if(p.length>0){q.appendTo(n)}jQuery.each(p,function(u,s){var t=jQuery("<option />");t.attr("value",s.name).text(s.name);t.attr("countryid",s.id);if(g){if(g.toUpperCase()==s.id){t.attr("selected","selected")}}t.appendTo(q)})})}else{jQuery.each(o.result,function(p,r){var q=jQuery("<option />");q.attr("value",r).text(r);q.attr("countryid",p);if(g){if(g.toUpperCase()==p){q.attr("selected","selected")}}jQuery(".countries").append(q)})}if(g){jQuery(".countries").trigger("change")}jQuery(".countries").prop("disabled",false)}else{alert(o.msg)}})}}jQuery(function(){var a=new locationInfo();a.getCountries();jQuery(".countries").on("change",function(c){var b=jQuery("option:selected",this).attr("countryid");if(b!=""){a.getStates(b)}else{jQuery(".states option:gt(0)").remove()}});jQuery(".states").on("change",function(b){var c=jQuery("option:selected",this).attr("stateid");if(c!=""){a.getCities(c)}else{jQuery(".cities option:gt(0)").remove()}});jQuery(".cities").on("change",function(b){var c=jQuery("option:selected",this).val();if(c!=""){a.confCity(c)}})});